CREATE DATABASE Fp_PRESENSI
ON
(
NAME = Fp_PRESENSI,
FILENAME = 'D:\DataKu\Smester 3\PEMROG LANJUT\Fp_PRESENSIdat.mdf',
SIZE = 10,
MAXSIZE = 50,
FILEGROWTH = 5)
LOG ON
(
NAME = 'PRESENSI_LOG',
FILENAME = 'D:\DataKu\Smester 3\PEMROG LANJUT\Fp_PRESENSIlog.ldf',
SIZE = 5MB,
MAXSIZE = 25MB,
FILEGROWTH = 5MB)

USE FP_PRESENSI

CREATE TABLE MAHASISWA
( 
NIM CHAR (10) NOT NULL PRIMARY KEY,
NAMA VARCHAR (35) NOT NULL,
ALAMAT  VARCHAR (100),
TGL_LAHIR DATE,
JENIS_KELAMIN VARCHAR (10))


CREATE TABLE MATAKULIAH
(
KODE_MATKUL INT IDENTITY (0,1) PRIMARY KEY,
NAMA_MATKUL CHAR (25) NOT NULL,
JUMLAH_SKS INT)


CREATE TABLE DOSEN 
(
NIP CHAR (10) NOT NULL PRIMARY KEY,
NAMA VARCHAR (35) NOT NULL,
ALAMAT VARCHAR (100) DEFAULT 'JOGJA',
JENIS_KELAMIN VARCHAR (10),
KODE_MATKKUL INT NOT NULL FOREIGN KEY REFERENCES MATAKULIAH (KODE_MATKUL)
ON UPDATE CASCADE ON DELETE NO ACTION)


CREATE TABLE KELAS
(
KODE_KELAS INT NOT NULL PRIMARY KEY,
NIP CHAR (10) NOT NULL FOREIGN KEY REFERENCES DOSEN (NIP)
ON UPDATE CASCADE ON DELETE NO ACTION)


CREATE TABLE PRESENSI
(
ID_PRESENSI INT NOT NULL PRIMARY KEY,
TGL_PRESENI DATE NOT NULL,
WKT_PRESENSI TIME NOT NULL,
NIP CHAR (10) NOT NULL FOREIGN KEY REFERENCES DOSEN (NIP)
ON UPDATE CASCADE ON DELETE NO ACTION)


CREATE TABLE DETAIL_PRESENSI
(
ID_DETAIL INT NOT NULL PRIMARY KEY,
ID_PRESENSI INT NOT NULL, 
NIM CHAR (10) NOT NULL ,
KODE_KELAS INT NOT NULL)

ALTER TABLE DETAIL_PRESENSI ADD CONSTRAINT FK_ABSENSI FOREIGN KEY (ID_PRESENSI)
REFERENCES PRESENSI (ID_PRESENSI)
ON DELETE NO ACTION ON UPDATE CASCADE

ALTER TABLE DETAIL_PRESENSI ADD CONSTRAINT FK_MHS FOREIGN KEY (NIM)
REFERENCES MAHASISWA (NIM)
ON DELETE CASCADE ON UPDATE NO ACTION

ALTER TABLE DETAIL_PRESENSI ADD CONSTRAINT FK_KELAS FOREIGN KEY (KODE_KELAS)
REFERENCES KELAS (KODE_KELAS)
ON DELETE CASCADE ON UPDATE NO ACTION

ALTER TABLE DOSEN
ADD Password varchar (20)

INSERT INTO MAHASISWA
VALUES ('15.11.9277','Okti Utari','YOGYAKARTA','1997-11-25','PEREMPUAN')

INSERT INTO MAHASISWA 
VALUES ('15.11.9278','Achmad Saifudin','PEMALANG','1996-05-07','LAKI-LAKI')

INSERT INTO MAHASISWA (NIM,NAMA,ALAMAT,JENIS_KELAMIN)
VALUES ('15.11.9279','Khairuddin','WONOSARI','LAKI-LAKI')


INSERT INTO MATAKULIAH
VALUES ('SISTEM BASIS DATA',4)

INSERT INTO MATAKULIAH (NAMA_MATKUL,JUMLAH_SKS)
VALUES ('PEMOGRAMAN LANJUT',4)

INSERT INTO MATAKULIAH
VALUES ('MULTIMEDIA',2)



INSERT INTO DOSEN (NIP,NAMA,ALAMAT,JENIS_KELAMIN,KODE_MATKKUL)
VALUES ('D1399','Susilo Haryono, M.Kom','YOGYAKARTA','LAKI-LAKI',0)

INSERT INTO DOSEN (NIP,NAMA,ALAMAT,JENIS_KELAMIN,KODE_MATKKUL)
VALUES ('D1400','Soffi Filianto, S.Kom','BALI','LAKI-LAKI',1)

INSERT INTO DOSEN (NIP,NAMA,JENIS_KELAMIN,KODE_MATKKUL)
VALUES ('D1401','Triyani Utami, M.Cs','PEREMPUAN',3)



INSERT INTO KELAS (KODE_KELAS,NIP)
VALUES (151112,'D1399')

INSERT INTO KELAS (KODE_KELAS,NIP)
VALUES (151113,'D1400')


INSERT INTO PRESENSI (ID_PRESENSI,TGL_PRESENI,WKT_PRESENSI,NIP)
VALUES (01234,'2016-11-25','08:50:11','D1400')

INSERT INTO PRESENSI (ID_PRESENSI,TGL_PRESENI,WKT_PRESENSI,NIP)
VALUES (01235,'2016-11-25','08:50:13','D1399')

INSERT INTO PRESENSI (ID_PRESENSI,TGL_PRESENI,WKT_PRESENSI,NIP)
VALUES (01236,'2016-11-25','08:51:14','D1399')


INSERT INTO DETAIL_PRESENSI (ID_DETAIL,ID_PRESENSI,NIM,KODE_KELAS)
VALUES (00001,01234,'15.11.9277',151112)

INSERT INTO DETAIL_PRESENSI (ID_DETAIL,ID_PRESENSI,NIM,KODE_KELAS)
VALUES (00002,01235,'15.11.9278',151112)

INSERT INTO DETAIL_PRESENSI (ID_DETAIL,ID_PRESENSI,NIM,KODE_KELAS)
VALUES (00003,01236,'15.11.9279',151112)

UPDATE DOSEN
SET ALAMAT = 'JL. GEJAYAN YOGYAKARTA'
WHERE NIP = 'D1400'


UPDATE MATAKULIAH
SET NAMA_MATKUL = 'KOMPUTER GRAFIS', JUMLAH_SKS = 2
WHERE KODE_MATKUL = 3

DELETE FROM DETAIL_PRESENSI
WHERE NIM = '15.11.9279' 


SELECT  NAMA, NIP
FROM DOSEN 

-- query barunya gih di excute yang ini ya
DROP TABLE DETAIL_PRESENSI

DROP TABLE MATERI

CREATE TABLE MATERI (
NAMA_MATERI VARCHAR (100) PRIMARY KEY NOT NULL,
KODE_MATKUL INT NOT NULL)

ALTER TABLE MATERI ADD CONSTRAINT FK_MATERI FOREIGN KEY (KODE_MATKUL)
REFERENCES MATAKULIAH (KODE_MATKUL)
ON DELETE NO ACTION ON UPDATE CASCADE

INSERT INTO MATERI
VALUES('PENGENALAN KONSEP OOP')

INSERT INTO MATERI
VALUES('PENGENALAN KONSEP OOP1')

INSERT INTO MATERI
VALUES ('FUNGSI LOGARITMA')

SELECT * FROM MATERI



SELECT * FROM MATAKULIAH











